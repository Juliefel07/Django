{% extends 'base.html' %}
{% load static %}

{% block title %}Lost Item Form{% endblock %}

{% block content %}
<div class="form-bg">
  <div class="form-card">

    <!-- Tabs -->
    <div class="form-tabs" style="display:flex; border-bottom:2px solid #ccc; margin-bottom:20px;">
      <div class="tab active" onclick="showForm('lost')">Report Lost Item</div>
      <div class="tab" onclick="showForm('found')">Found Lost Item</div>
    </div>

    <!-- LOST ITEM FORM -->
    <div id="lost-form">
      <div class="form-header">
        <div>
          <h1>Lost Item</h1>
          <h2>Form</h2>
        </div>
        <div class="form-logo">
          <img src="{% static 'images/school_logo.png' %}" alt="Logo">
        </div>
      </div>

      <form method="post" action="{% url 'report_lost_item' %}">
        {% csrf_token %}
        <!-- Date -->
        <div class="row">
          <label>Date:</label>
          <input type="date" name="date" required>
        </div>

        <!-- Personal Information -->
        <div class="section">
          <div class="section-header">Personal Information</div>
          <div class="row">
            <label>Student ID</label>
            <input type="text" name="student_id" required>
          </div>
          <div class="row">
            <label>Name:</label>
            <input type="text" name="name" required>
          </div>
          <div class="row">
            <label>Level:</label>
            <select id="level" name="level" onchange="toggleFields()" required>
              <option value="">Select</option>
              <option value="basic_ed">Basic Education</option>
              <option value="college">College</option>
            </select>
          </div>
          <div class="row" id="basic-ed-field" style="display:none;">
            <label>Grade & Section:</label>
            <input type="text" name="grade_section">
          </div>
          <div class="row" id="college-field" style="display:none;">
            <label>Department:</label>
            <input type="text" name="department">
          </div>
          <div class="row">
            <label>Contact Number:</label>
            <input type="tel" name="contact_number" required>
          </div>
          <div class="row">
            <label>Address:</label>
            <input type="text" name="address" required>
          </div>
        </div>

        <!-- LAST SEEN -->
        <div class="section">
          <div class="section-header">Last Seen</div>
          <div class="row">
            <label>Place (inside school campus):</label>
            <input type="text" name="place" required>
          </div>
          <div class="row">
            <label for="item">Item:</label>
            <input type="text" name="item" id="item" required>
          </div>
          <div class="row">
            <label>Date:</label>
            <input type="date" name="last_seen_date" required>
          </div>
          <div class="row">
            <label>Time:</label>
            <input type="time" name="last_seen_time" required>
          </div>
          <div class="row">
            <label>Description:</label>
            <textarea name="description" rows="4" required></textarea>
          </div>
        </div>

        <p class="footer-note">
          By submitting this form, you agree to our Campus Lost & Found Policy.
        </p>

        <button type="submit" class="submit-btn">Submit Report</button>
      </form>
    </div>

    <!-- FOUND ITEM FORM -->
    <div id="found-form" style="display:none;">
      <div class="form-header">
        <div>
          <h1>Found Item</h1>
          <h2>Form</h2>
        </div>
        <div class="form-logo">
          <img src="{% static 'images/school_logo.png' %}" alt="Logo">
        </div>
      </div>

      <form method="post" action="{% url 'report_found_item' %}">
        {% csrf_token %}
        <div class="row">
          <label>Date Found:</label>
          <input type="date" name="found_date" required>
        </div>

        <div class="row">
          <label>Finder Name:</label>
          <input type="text" name="finder_name" required>
        </div>

        <div class="row">
          <label>Contact Number:</label>
          <input type="tel" name="contact_number" required>
        </div>

        <div class="row">
          <label>Place Found:</label>
          <input type="text" name="place_found" required>
        </div>

        <div class="row">
         <label>Item Type</label>
        <input type="text" name="item_type" placeholder="Item" required>
        </div>

        <div class="row">
          <label>Description:</label>
          <textarea name="found_description" rows="4" required></textarea>
        </div>

        <p class="footer-note">
          By submitting this form, you agree to our Campus Lost & Found Policy.
        </p>

        <button type="submit" class="submit-btn">Submit Report</button>
      </form>
    </div>

  </div>
</div>

<style>
  body { background: #f0f4f8; font-family: 'Poppins', sans-serif; }

  .form-tabs .tab {
    flex: 1; text-align:center; padding:10px 0; cursor:pointer;
    font-weight:500; border-bottom:2px solid transparent; transition: all 0.2s;
  }
  .form-tabs .tab:hover {
    background-color: #e0e7ff; color: #2c3e50; transform: translateY(-2px);
    box-shadow: 0 2px 6px rgba(0,0,0,0.15); transition: all 0.2s ease;
  }
  .form-tabs .tab.active {
    border-bottom: 2px solid #2c3e50; font-weight:600; color:#2c3e50;
  }

  .form-bg { display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 30px; }
  .form-card { background: #fff; border-radius: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); padding: 40px; width: 100%; max-width: 700px; }
  .form-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; }
  .form-header h1 { font-size: 32px; font-weight: 700; color: #1a1a1a; margin: 0; }
  .form-header h2 { font-size: 22px; color: #555; margin-top: -4px; font-weight: 400; }
  .form-logo img { width: 40px; height: 40px; object-fit: contain; }
  .section { margin-top: 25px; }
  .section-header { background-color: #2c3e50; color: white; font-weight: 600; font-size: 15px; padding: 6px 12px; border-radius: 6px; margin-bottom: 10px; }
  .row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
  .row label { flex: 1; text-align: left; font-size: 14px; font-weight: 500; color: #333; margin-right: 20px; }
  .row input, .row select, .row textarea { flex: 2; border: 1px solid #ccc; border-radius: 10px; padding: 8px 10px; font-size: 14px; width: 100%; box-sizing: border-box; }
  textarea { resize: none; }
  .footer-note { font-size: 13px; color: #666; margin-top: 15px; text-align: left; }
  .submit-btn { display: block; width: 100%; background-color: #2c3e50; color: white; border: none; border-radius: 10px; padding: 12px; font-size: 15px; font-weight: 500; margin-top: 20px; cursor: pointer; transition: background-color 0.3s; }
  .submit-btn:hover { background-color: #02223f; }
</style>

<script>
  function toggleFields() {
    const level = document.getElementById("level").value;
    document.getElementById("basic-ed-field").style.display = (level === "basic_ed") ? "flex" : "none";
    document.getElementById("college-field").style.display = (level === "college") ? "flex" : "none";
  }

  function showForm(type) {
    const lostForm = document.getElementById('lost-form');
    const foundForm = document.getElementById('found-form');
    const tabs = document.querySelectorAll('.form-tabs .tab');

    if(type === 'lost') {
      lostForm.style.display = 'block';
      foundForm.style.display = 'none';
      tabs[0].classList.add('active');
      tabs[1].classList.remove('active');
    } else {
      lostForm.style.display = 'none';
      foundForm.style.display = 'block';
      tabs[0].classList.remove('active');
      tabs[1].classList.add('active');
    }
  }
</script>
{% endblock %}
